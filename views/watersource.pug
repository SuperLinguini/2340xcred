extends navbar
block content
    html
        script.
            var sourceReports = [];
            var sReportData = firebase.database().ref('waterSourceReports');
            sReportData.orderByChild('reportNumber').on('value', function(snapshot) {
                console.log(snapshot.val());
                sourceReports = [];
                snapshot.forEach(function(childSnapshot) {
                    console.log(childSnapshot.val());
                    sourceReports.push(childSnapshot.val());
                    // fill the data in collection
                    var newReport = document.createElement('li');
                    newReport.className = 'collection-item'

                    var elt = document.createElement('p');
                    elt.setAttribute('style', 'clear: both; float:right');
                    var time = new Date(childSnapshot.val()['date']['time']);
                    console.log(time);
                    elt.innerHTML = 'Date: ' + time.toLocaleDateString();
                    newReport.appendChild(elt);

                    elt = document.createElement('p');
                    elt.setAttribute('style', 'clear: both; float:right');
                    elt.innerHTML = childSnapshot.val()['type'] + ', ' + childSnapshot.val()['condition'];
                    newReport.appendChild(elt);

                    elt = document.createElement('p');
                    elt.innerHTML = '#' + childSnapshot.val()['reportNumber'] + ' ' + childSnapshot.val()['reportName'];
                    newReport.appendChild(elt);

                    elt = document.createElement('p');
                    elt.innerHTML = childSnapshot.val()['reporter'];
                    newReport.appendChild(elt);

                    elt = document.createElement('p');
                    elt.innerHTML = 'Lat/Lng: (' + Number(childSnapshot.val()['location']['latitude']).toFixed(3) + ', ' +
                        Number(childSnapshot.val()['location']['longitude']).toFixed(3) + ')';
                    newReport.appendChild(elt);

                    document.getElementById('reportList').appendChild(newReport);
                });
            });
        head
            style.
                #map {
                    height: 400px;
                    width: 100%;
                }
        body

            ul.collection(style="width:60%", id='reportList')


            //h1 Water Source
            //
            //h3 INSERT CHART HERE